# CORRECTED .htaccess file for terensys.fr
# This fixes the infinite redirect loop

RewriteEngine On

# 1. Force HTTPS for all requests
RewriteCond %{HTTPS} off
RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L]

# 2. Force www subdomain (redirect non-www to www)
RewriteCond %{HTTP_HOST} ^terensys\.fr$ [NC]
RewriteRule ^(.*)$ https://www.terensys.fr/$1 [R=301,L]

# 3. Remove trailing slashes to prevent self-redirect loops
# Only if the request is not for a directory
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.+)/$ /$1 [R=301,L]

# 4. Default document handling (if needed)
DirectoryIndex index.html index.php

# Security headers (optional but recommended)
<IfModule mod_headers.c>
    Header always set X-Content-Type-Options nosniff
    Header always set X-Frame-Options SAMEORIGIN
    Header always set X-XSS-Protection "1; mode=block"
    Header always set Strict-Transport-Security "max-age=31536000; includeSubDomains; preload"
</IfModule>

# IMPORTANT: Remove or comment out any existing rules that look like:
# RewriteRule ^(.*)$ https://www.terensys.fr/ [R=301,L]
# These cause the infinite redirect loop